<style type="text/css">
    .layui-layer-content {
        overflow: visible!important;
    }
    /*小屏幕样式*/

    @media screen and (max-width: 768px) {
        .modal-body .reset {
            margin-left: 0 !important;
        }
        .modal-body .reset .layui-btn-small {
            margin: 5px 0 0 15px;
        }
        .modal-body .layui-form .layui-form-label {
            width: 50px;
        }
        .modal-body .layui-form .layui-input-block {
            float: left;
            margin-left: 15px;
        }
        .special-item {
            padding: 15px;
        }
        .special-item .layui-input-block {
            margin-left: 15px;
        }
        .special-item .special-flex {
            margin-left: 15px;
        }
    }
</style>
<div class="modal-body">
    <div style='margin-left: 29px;margin-top: 15px;' class="reset">
        <label class="layui-form-label" style="text-align: left;">操作</label>
        <button class="layui-btn layui-btn-small" data-load='__URL__/xgmm?id={$vo.id}'>重置密码为123456</button>
    </div>
    <form class="layui-form layui-box" action="__URL__/update" data-auto="false" method="post">
        <div class="layui-form-item">
            <label class="layui-form-label">姓名</label>
            <div class="layui-input-block">
                <input type="text" autofocus name="name" value='{$vo.name}' pattern="^\S{1,}$" required="" title="请输入姓名" placeholder="请输入姓名"
                       class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">微信号</label>
            <div class="layui-input-block">
                <input type="text" autofocus name="wechatnum" value='{$vo.wechatnum}' pattern="^\S{1,}$" required="" title="请输入微信号" placeholder="请输入微信号"
                       class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">手机号</label>
            <div class="layui-input-block">
                <input type="text" autofocus name="phone" value='{$vo.phone}' pattern="^\S{1,}$" required="" title="请输入手机号" placeholder="请输入手机号"
                       class="layui-input">
            </div>
        </div>
        <?php if(isset($vo['sex'])):?>
        <div class="layui-form-item">
            <label class="layui-form-label">性别</label>
            <div class="layui-input-block">
                <input type="radio" name="sex" value="1" title="男" <?php echo $vo['sex']==1?'checked':'';?>>
                <input type="radio" name="sex" value="2" title="女" <?php echo $vo['sex']==2?'checked':'';?>>
            </div>
        </div>
        <?php endif;?>
        <div class="layui-form-item">
            <label class="layui-form-label">邮箱</label>
            <div class="layui-input-block">
                <input type="text" autofocus name="email" value='{$vo.email}' placeholder="请输入邮箱" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item special-item">
            <label class="layui-form-label">地址</label>
            <div class="form-right flex special-flex">
                <div class="flex-item">
                    <select class="select-hook" name="province" id="province" lay-filter="province" lay-verify="required" lay-search="" >
                        <option value="{$vo.province}">{$vo.province}</option>
                    </select>
                    <!--<input type="text" autofocus name="address" value='{$vo.idennum}' pattern="^\S{1,}$" required=""  title="请输入地址" placeholder="请输入地址" class="layui-input">-->
                </div>
                <div class="flex-item">
                    <select class="select-hook" name="city" id="city" lay-filter="city" lay-verify="required" lay-search="" >
                        <option value="{$vo.city}">{$vo.city}</option>
                    </select>
                    <!--<input type="text" autofocus name="address" value='{$vo.idennum}' pattern="^\S{1,}$" required=""  title="请输入地址" placeholder="请输入地址" class="layui-input">-->
                </div>
                <div class="flex-item">
                    <select class="select-hook" name="county" id="area" lay-filter="area" lay-verify="required" lay-search="" >
                        <option value="{$vo.county}">{$vo.county}</option>
                    </select>
                    <!--<input type="text" autofocus name="address" value='{$vo.idennum}' pattern="^\S{1,}$" required=""  title="请输入地址" placeholder="请输入地址" class="layui-input">-->
                </div>
            </div>

        </div>
        <div class="layui-form-item special-item">
            <label class="layui-form-label">详细地址</label>
            <div class="layui-input-block">
                <input type="text" autofocus name="address" value='{$vo.address}' pattern="^\S{1,}$" required=""  title="详细地址" placeholder="请输入详细地址" class="layui-input">
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">身份证</label>
                <div class="layui-input-block">
                    <input type="text" autofocus name="idennum" value='{$vo.idennum}' pattern="^\S{1,}$" required="" title="请输入地址" placeholder="请输入地址"
                           class="layui-input">
                </div>
            </div>
            <div class="hr-line-dashed"></div>

            <div class="layui-form-item text-center">
                <input type="hidden" name="id" value="{$vo.id}" />
                <button class="layui-btn" type='submit'>确认修改</button>
                <button class="layui-btn layui-btn-danger" type='button' data-confirm="确定要取消修改吗？" data-close>取消修改</button>
            </div>
        </div>
    </form></div>

<script type="text/javascript">
    var province,province1,city,city1,area,area1;

    $.getJSON("__PUBLIC__/Radmin_v3/plugs/echart/map/area.json",function(data){
        province = new Array();
        $.each(data,function(key,value){
            province.push('<option value="'+value.name+'">'+value.name+'</option>');
        })
        $('#province').append(province);
        form.render('select');
    })

    form.on('select(province)',function(data){
        province1 = data.value;
        $.getJSON("__PUBLIC__/Radmin_v3/plugs/echart/map/area.json",function(data){
            city = new Array();
            $.each(data, function(key,value) {
                if(province1 === value.name){
                    $.each(value.sub, function(k,v) {
                        city.push('<option value="'+v.name+'">'+v.name+'</option>');
                    });
                }
            });
            $('#city').empty().append(city);
            form.render('select');
        });
    })

    form.on('select(city)',function(data){
        city1 = data.value;
        $.getJSON("__PUBLIC__/Radmin_v3/plugs/echart/map/area.json",function(data){
            area = new Array();
            $.each(data, function(key,value) {
                if(province1 == value.name){
                    $.each(value.sub, function(k,v) {
                        if(city1 == v.name){
                            if(!(v.sub==undefined||v.sub==""||v.sub==null)){
                                $.each(v.sub, function(i,j) {
                                    area.push('<option value="'+j.name+'">'+j.name+'</option>');
                                });
                            }
                        }
                    });
                }
            });
            $('#area').empty().append(area);
            form.render('select');
        });
    })
    form.render();
</script>
