<!DOCTYPE html>
<html lang="en">

<head>
    <script type="text/javascript" src="__PUBLIC__/js/WdatePicker.js"></script>
</head>

<body>
    <section class="layui-container">
        <div class="content">
            <header class="header">
                <h3>总部订单统计</h3>
            </header>
            <!--<table class="layui-table">-->
                <!--<thead>-->
                <!--<tr>-->
                    <!--<th>产品名称</th>-->
                    <!--<th>总部出货量</th>-->
                    <!--<th>总部出货总金额</th>-->
                <!--</tr>-->
                <!--</thead>-->
                <!--<tbody>-->
                <!--<empty name="list">-->
                    <!--<tr>-->
                        <!--<td colspan="10">对不起,没有找到统计信息! </td>-->
                    <!--</tr>-->
                    <!--<else/>-->
                    <!--<foreach name="list" item="vo">-->
                        <!--<tr>-->
                        <!--<td>{$vo.p_name}</td>-->
                        <!--<td>{$vo.cost_num}</td>-->
                        <!--<td>{$vo.cost_money}</td>-->
                        <!--</tr>-->
                    <!--</foreach>-->
                <!--</empty>-->
                <!--</tbody>-->
            <!--</table>-->

            <form class="layui-form form layui-row form-search" action="__SELF__" method="get" onsubmit="return false">

                <div class="layui-form-item form-item">
                    <label class="layui-form-label" for="start_month">选择月份</label>
                    <div class="time-wrapper">
                        <input type="text" class="layui-input blue" value="{$start_month}" name="start_month" id="month_select" readonly="readonly"
                            placeholder="选择月份" autocomplete="on">
                        <i class="fa fa-angle-down"></i>
                    </div>
                </div>
                <div class="layui-form-item form-item">
                    <label class="layui-form-label" for="end_month">选择日期</label>
                    <div class="time-wrapper" style="min-width:220px;">
                        <input type="text" class="layui-input blue" value="{$end_month}" name="end_month" id="day_select" readonly="readonly" placeholder="选择日期"
                            autocomplete="on">
                        <i class="fa fa-angle-down"></i>
                    </div>
                </div>

                <!--<div class="layui-form-item form-item">-->
                <!--<label class="layui-form-label" for="month">选择月份</label>-->
                <!--<div class="time-wrapper">-->
                <!--<input type="text" class="layui-input blue" value="{$month}" name="month" id="month" readonly="readonly" placeholder="选择月份" autocomplete="on">-->
                <!--<i class="fa fa-angle-down"></i>-->
                <!--</div>-->
                <!--</div>-->


                <!--            <div class="layui-form-item form-item">
                <label class="layui-form-label" for="pid">产品</label>
                <div class="select-wrapper">
                    <select name="pid" id="pid" lay-verify="required">
                        <option value="">选择产品</option>
                        <foreach name="templet_info" key="key_temp" item="vo_temp">
                            <option value="{$vo_temp.id}">{$vo_temp.name}</option>
                        </foreach>
                    </select>
                </div>
            </div>-->
                <div class="layui-form-item form-item">
                    <label class="layui-form-label" for="pid">产品</label>
                    <div class="select-wrapper">
                        <select name="pid" id="pid" lay-verify="required">
                            <option value="">选择产品</option>
                            <!--<option value="a">全部</option>-->
                            <option value="b">所有产品</option>
                            <foreach name="templet_info" key="key_temp" item="vo_temp">
                                <option value="{$vo_temp.id}">{$vo_temp.name}</option>
                            </foreach>
                        </select>
                    </div>
                </div>
                <div class="search-btn">
                    <input type="hidden" id="hidden-input" name="type" value="">
                    <button type="submit" class="layui-btn layui-btn-radius">搜索</button>
                </div>
            </form>
            <div class="table-wrapper">
                <table class="layui-table" lay-skin="row" lay-size="sm">
                    <thead>
                        <tr>
                            <th>产品名称</th>
                            <th>月份</th>
                            <th>日期</th>
                            <th>总部出货量</th>
                            <th>总部出货总金额</th>
                        </tr>
                    </thead>
                    <tbody>
                        <empty name="top_list">
                            <tr>
                                <td colspan="10">对不起,没有找到统计信息! </td>
                            </tr>
                            <else />
                            <volist name="top_list" id="m">
                                <tr>
                                    <if condition="$m.p_name eq '所有产品'">
                                        <td style="color: #0a98ec"> {$m.p_name}</td>
                                        <else/>
                                        <td> {$m.p_name}</td>
                                    </if>
                                    <td>{$m.month}</td>
                                    <td>
                                        <if condition="$m.day eq 0">
                                            全月
                                            <else/>
                                            {$m.day}
                                        </if>
                                    </td>
                                    <td>{$m.cost_num}</td>
                                    <td>{$m.cost_money}</td>
                                </tr>
                            </volist>
                            <include file="Public/page" />
                            <!-- <div id="page"></div> -->
                            <!--<tr><td colspan="14"><div class="pull-right">{$page}</div></td></tr>-->
                        </empty>
                    </tbody>
                </table>
                <div class="col-md-4">
                    <!--<button type="button" title="系统不会自动生成某月未下单经销商的统计，如需为了统计方便，选择月份再点击这里生成该月未下单的经销商统计以便筛选" onclick="return create_order_count();" class="btn btn-info pull-right">生成所有经销商统计</button>-->
                </div>
            </div>
        </div>

    </section>

    <script>
        form.render()
        layui.use('laydate', function () {
            var laydate = layui.laydate;
            laydate.render({
                elem: '#month_select',
                type: 'month',
                range: '-',
                format: 'yyyyMM',
                done: function(){
                    $('#hidden-input').val('month');
                    $('#day_select').val('');
                }
            });
            laydate.render({
                elem: '#day_select',
                range: '-',
                format: 'yyyyMMdd',
                done: function(){
                    $('#hidden-input').val('day');
                    $('#month_select').val('');
                }
            });
        })

        function create_order_count() {

            var month = $("#month").val();

            if (!confirm('是否生成' + month + '月未下单的用户统计数据')) {
                return false;
            }

            location.href = '__URL__/create_order_count?month=' + month;

        } //enf func create_order_count
    </script>
</body>

</html>