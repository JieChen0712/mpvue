<style type="text/css">
  .layui-layer-content {
    overflow: visible!important;
  }
  .color_text{
    width: 65%;
    display: inline-block;
  }
  .color_select{
    display: inline-block;
    width: 25px;
    margin-right: 10px;
  }
  /*小屏幕样式*/
  
  @media screen and (max-width: 768px) {
    .modal-body .reset {
      margin-left: 0 !important;
    }
    .modal-body .reset .layui-btn-small {
      margin: 5px 0 0 15px;
    }
    .modal-body .layui-form .layui-form-label {
      width: 50px;
    }
    .modal-body .layui-form .layui-input-block {
      float: left;
      margin-left: 15px;
    }
    .special-item {
      padding: 15px;
    }
    .special-item .layui-input-block {
      margin-left: 15px;
    }
    .special-item .special-flex {
      margin-left: 15px;
    }
  }
</style>
<script>
  /**
   * 使用图片上传接口需满足以下条件
   * 1.容器选择器id=upload
   * 2.设置name=image的input标签隐藏域
   * 3.指定上传目录名称
   */
  //上传目录
  var upload_dir_name = 'store';
</script>
<div class="container-fluid edit-wrapper layui-container">
  <header class="edit-title">
        <blockquote class="layui-elem-quote">
          <span class="title">编辑商城</span>
        </blockquote>
      </header>
  <div class="layui-content">
    <form class="layui-form layui-box" action="__URL__/edit_post" data-auto="false" method="post" style="padding:25px 30px 20px 0">
      <div class="layui-form-item items">
        <label class="form-text">商城名称：</label>
        <div class="form-right">
          <input type="text" autofocus name="name" value='{$list.name}' required="" title="请输入商城名称" placeholder="请输入商城名称" class="layui-input input-inf2">
        </div>
      </div>
      <div class="layui-form-item items">
        <label class="form-text">appid：</label>
        <div class="form-right">
          <input type="text" autofocus name="appid" value='{$list.appid}' required="" title="请输入appid" placeholder="请输入appid" class="layui-input input-inf2">
        </div>
      </div>

      <div class="layui-form-item items">
        <label class="form-text">appsecret：</label>
        <div class="form-right">
          <input type="text" autofocus name="appsecret" value='{$list.appsecret}' required="" title="请输入appsecret" placeholder="请输入appid" class="layui-input input-inf2">
        </div>
      </div>

      <div class="layui-form-item items">
        <label class="form-text">支付二维码：</label>
        <div class="form-right">
          <!--引入图片页面-->
          <script src="__PUBLIC__/Radmin_v3/js/img_upload.js"></script>
          <if condition="$list.image neq ''">
            <include file="Public/image" image_name="qrcode" is_show="1" img_url="{$list.qrcode}" />
            <else/>
            <include file="Public/image" image_name="qrcode" is_show="0" img_url="{$list.qrcode}" />
          </if>
        </div>
      </div>
      
      <div class="layui-form-item items">
        <label class="form-text">横向滑动栏目：</label>
        <div class="form-right">
          <div class="layui-input-inline three-select">
            <input type="text" autofocus name="kind_hor_name" id="kind_hor_name" value="{$list.first_column_name}" required="" placeholder="请输入栏目名称" class="layui-input">
          </div>
          <div class="layui-input-inline three-select">
            <select name="font-hor" id="font-hor">
              <option value="">请选择字体</option>
              <option value="SimSum">宋体</option>
              <option value="SimHei">黑体</option>
              <option value="Microsoft JhengHei">微软正黑体</option>
              <option value="KaiTi">楷体</option>
              <option value="NSimSun">新宋体</option>
              <option value="FangSong">仿宋</option>
            </select>
          </div>
          <div class="layui-input-inline three-select">
            <input type="color" name="hor_color" class="color_select" id="hor_color" value="{$list.first_column_color}">
            <input type="text" name="color_text" class="color_text layui-input" placeholder="选择字体颜色" value="{$list.first_column_color}">
          </div>
        </div>
      </div>
      <div class="layui-form-item items">
        <label class="form-text">下拉滑动栏目：</label>
        <div class="form-right">
          <div class="layui-input-inline three-select">
            <input type="text" autofocus name="kind_ver_name" id="kind_ver_name" value="{$list.second_column_name}" required="" placeholder="请输入栏目名称" class="layui-input">
          </div>
          <div class="layui-input-inline three-select">
            <select name="font-ver" id="font-ver" lay-verify="required">
              <option value="">请选择字体</option>
              <option value="SimSum">宋体</option>
              <option value="SimHei">黑体</option>
              <option value="Microsoft JhengHei">微软正黑体</option>
              <option value="KaiTi">楷体</option>
              <option value="NSimSun">新宋体</option>
              <option value="FangSong">仿宋</option>
            </select>
          </div>
          <div class="layui-input-inline three-select">
            <input type="color" name="ver_color" class="color_select" id="ver_color" value="{$list.second_column_color}">
            <input type="text" name="color_text" class="color_text layui-input" placeholder="选择字体颜色" value="{$list.second_column_color}">
          </div>
        </div>
      </div>

      <div class="hr-line-dashed"></div>

      <div class="layui-form-item text-center">
        <input type="hidden" name="id" value="{$list.id}" />
        <button class="layui-btn" type='submit'>确认修改</button>
        <button class="layui-btn layui-btn-danger" type='button' data-confirm="确定要取消修改吗？" data-close>取消修改</button>
      </div>
    </form>
  </div>
</div>

<script type="text/javascript">
  var font_ver = "{$list.second_column_font}"
  var font_hor = "{$list.first_column_font}"
  var province, province1, city, city1, area, area1;

  $.getJSON("__PUBLIC__/Radmin_v3/plugs/echart/map/area.json", function(data) {
    province = new Array();
    $.each(data, function(key, value) {
      province.push('<option value="' + value.name + '">' + value.name + '</option>');
    })
    $('#province').append(province);
    form.render('select');
  })

  form.on('select(province)', function(data) {
    province1 = data.value;
    $.getJSON("__PUBLIC__/Radmin_v3/plugs/echart/map/area.json", function(data) {
      city = new Array();
      $.each(data, function(key, value) {
        if(province1 === value.name) {
          $.each(value.sub, function(k, v) {
            city.push('<option value="' + v.name + '">' + v.name + '</option>');
          });
        }
      });
      $('#city').empty().append(city);
      form.render('select');
    });
  })

  form.on('select(city)', function(data) {
    city1 = data.value;
    $.getJSON("__PUBLIC__/Radmin_v3/plugs/echart/map/area.json", function(data) {
      area = new Array();
      $.each(data, function(key, value) {
        if(province1 == value.name) {
          $.each(value.sub, function(k, v) {
            if(city1 == v.name) {
              if(!(v.sub == undefined || v.sub == "" || v.sub == null)) {
                $.each(v.sub, function(i, j) {
                  area.push('<option value="' + j.name + '">' + j.name + '</option>');
                });
              }
            }
          });
        }
      });
      $('#area').empty().append(area);
      form.render('select');
    });
  })
  form.render();
  $(function(){
    $('#ver_color,#hor_color').change(function(){
      $(this).siblings('.color_text').val($(this).val());
    })
    $('.color_text').change(function(){
      $(this).siblings('input').val($(this).val());
    })
    $('#font-ver').children('option[value="'+font_ver+'"]').attr('selected',true);
    $('#font-hor').children('option[value="'+font_hor+'"]').attr('selected',true);
  })
</script>