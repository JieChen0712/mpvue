global.webpackJsonp([1],{"+4R2":function(t,e,s){"use strict";var i=s("wtEF"),n=s("VsUZ"),a=s("+mQk"),o=s("wsM4"),c=s("UCfo");e.a={data:function(){return{imgUrls:["../../../static/banner.png"],indicatorDots:!0,interval:5e3,duration:1e3,swiperHeight:"200px",secPage:1,couponPage:1,secTemplet:[],couponTemplet:[]}},components:{swiper:a.a,countdown:o.a,card:c.a},created:function(){n.a.getStore().then(function(t){1===t.code?(wx.setNavigationBarTitle({title:t.info.name}),wx.setTopBarText({text:t.info.name}),wx.setStorageSync("qrcode")):wx.showToast({title:t.msg,icon:"none",duration:2e3})}).catch(function(t){console.log(t)})},mounted:function(){this.getSecTemplets(1),this.getSecTemplets(2)},methods:{cantbuy:function(t,e){this.secTemplet[e].saleStatus=t},buyGoods:function(t,e){if(2!==t)return!1;console.log("buy"),wx.navigateTo({url:"/pages/detail/main?id="+e})},getSecTemplets:function(t){var e=this,s=void 0;1===t?s=this.secPage:2===t&&(s=this.couponPage),n.a.getTemplet(t,s,1).then(function(s){1===s.code&&null!==s.info.list?1===t?(e.secPage++,e.secTemplet=e.secTemplet.concat(s.info.list)):2===t&&(e.couponPage++,e.couponTemplet=e.couponTemplet.concat(s.info.list)):null===s.info.list?wx.showToast({title:"暂无更多商品",icon:"none",duration:2e3}):wx.showToast({title:s.msg,icon:"none",duration:2e3})}).catch(function(t){console.log(t)})},checkLogin:function(){var t=this;wx.checkSession({success:function(){wx.getStorageSync("openid")?wx.navigateTo({url:"/pages/coupon/main"}):t.$options.methods.Login()},fail:function(){t.$options.methods.Login()}})},Login:function(){wx.login({success:function(t){var e=t.code;wx.setStorageSync("resCode",e),wx.getUserInfo({success:function(t){n.a.checkLogin(e,t.userInfo.nickName,t.userInfo.avatarUrl,t.userInfo.province,t.userInfo.city,t.userInfo.country).then(function(t){if(1!==t.code)return wx.showToast({title:"登录失败",icon:"none",duration:2e3}),!1;wx.setStorageSync("openid",t.info.openid),wx.showToast({title:"登录成功",icon:"success",duration:2e3,complete:function(){wx.navigateTo({url:"/pages/coupon/main"})}})}).catch(function(t){console.log(t)})},fail:function(){}})},fail:function(){}})},changePercent:function(t,e){t=Number(t);var s=100*(1-(e=Number(e))/(t+e));return isNaN(s)?0:s},lower:function(t){this.getSecTemplets(1)}},filters:{isZero:function(t){return Number(t)>0}},onPullDownRefresh:function(){wx.showToast({title:"下拉",icon:"none",duration:600}),setTimeout(function(){wx.stopPullDownRefresh()},1e3)},onReachBottom:function(){this.getSecTemplets(2)},store:i.a}},Ih3U:function(t,e){},MhDc:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("5nAL"),n=s.n(i),a=s("Qt9A");new n.a(a.a).$mount()},Qt9A:function(t,e,s){"use strict";var i=s("+4R2"),n=s("jZfg");var a=function(t){s("Ih3U")},o=s("WocH")(i.a,n.a,a,"data-v-0ab7f366",null);e.a=o.exports},Witq:function(t,e){},iSb8:function(t,e,s){"use strict";var i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"countdown"},[e("p",[this._v(this._s(this.timeText))])],1)},staticRenderFns:[]};e.a=i},jZfg:function(t,e,s){"use strict";var i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mall"},[s("div",{staticClass:"swiper-wrapper"},[s("swiper",{attrs:{imgUrls:t.imgUrls,indicatorDots:t.indicatorDots,interval:t.interval,duration:t.duration,swiperHeight:t.swiperHeight}})],1),t._v(" "),s("div",{staticClass:"entry"},[s("ul",{staticClass:"entry-list"},[s("li",{staticClass:"list-item"},[s("a",{attrs:{href:"/pages/product/main","open-type":"switchTab"}},[s("img",{attrs:{src:"../../../static/product_icon.png",alt:""}}),t._v(" "),s("p",[t._v("产品展示")])],1)]),t._v(" "),s("li",{staticClass:"list-item"},[s("a",{attrs:{href:"/pages/sale/main","open-type":"switchTab"}},[s("img",{attrs:{src:"../../../static/sale_icon.png",alt:""}}),t._v(" "),s("p",[t._v("促销")])],1)]),t._v(" "),s("li",{staticClass:"list-item"},[s("a",{attrs:{eventid:"0"},on:{click:t.checkLogin}},[s("img",{attrs:{src:"../../../static/coupon_icon.png",alt:""}}),t._v(" "),s("p",[t._v("优惠券")])],1)])],1)],1),t._v(" "),s("div",{staticClass:"seckill"},[s("p",{staticClass:"title"},[t._v("-限时秒杀-")]),t._v(" "),s("scroll-view",{staticClass:"product-list",staticStyle:{},attrs:{"scroll-x":"true",eventid:"4"},on:{scrolltolower:t.lower}},t._l(t.secTemplet,function(e,i){return s("view",{key:i,staticClass:"product-item",attrs:{eventid:"3-"+i},on:{click:function(s){t.buyGoods(e.saleStatus,e.id)}}},[s("div",{staticClass:"product-img"},[s("img",{attrs:{mode:"widthFix",src:"https://mall.wsxitong.cn"+e.image}}),t._v(" "),s("span",{staticClass:"sec-title"},[t._v("剩余："+t._s(e.quantity)+"件")]),t._v(" "),s("div",{staticClass:"mask",class:{active:1===e.saleStatus||3===e.saleStatus}},[s("p",[t._v("活动结束")])],1)]),t._v(" "),s("div",{staticClass:"product-detail"},[s("p",{staticClass:"name",attrs:{eventid:"1-"+i},on:{click:t.showTarget}},[s("span",{staticClass:"hot"},[t._v("HOT")]),t._v(t._s(e.name)+t._s(Number(e.quantity)))]),t._v(" "),s("card",{attrs:{start:!0,startTime:e.buy_limit_start_time,endTime:e.buy_limit_end_time,index:i,eventid:"2-"+i,mpcomid:"0-"+i},on:{over:t.cantbuy}}),t._v(" "),s("progress",{staticClass:"progress",attrs:{percent:e.quantity,active:"",activeColor:"#fe0100",backgroundColor:"transparent"}}),t._v(" "),s("p",{staticClass:"price"},[t._v("秒杀价："),s("span",{staticClass:"red"},[t._v("￥"+t._s(e.price))]),s("span",{staticClass:"del"},[t._v("￥"+t._s(e.original_price))])])],1)])}))],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.couponTemplet.length>0,expression:"couponTemplet.length > 0"}],staticClass:"team-buy"},[s("p",{staticClass:"title"},[t._v("-热门团购-")]),t._v(" "),t._l(t.couponTemplet,function(e,i){return s("div",{key:i,staticClass:"team-product",attrs:{eventid:"5-"+i},on:{click:function(s){t.buyGoods(2,e.id)}}},[s("img",{attrs:{mode:"widthFix",src:"https://mall.wsxitong.cn"+e.image}}),t._v(" "),s("div",{staticClass:"text-left"},[s("p",{staticClass:"title2"},[t._v(t._s(e.name))]),t._v(" "),s("p",{staticClass:"desc"},[t._v(t._s(e.disc))]),t._v(" "),s("p",{staticClass:"price"},[s("span",{staticClass:"hot"},[t._v("拼团价")]),t._v("￥"+t._s(e.price))]),t._v(" "),s("p",{staticClass:"red"},[t._v("立即拼团")])],1),t._v(" "),s("div",{staticClass:"text-right"},[s("p",[t._v(t._s(e.sales)),s("span",{staticClass:"desc"},[t._v("件已售")])])],1),t._v(" "),s("p",{staticClass:"more"},[t._v("查看更多>")])],1)})],2)])},staticRenderFns:[]};e.a=i},oQ93:function(t,e,s){"use strict";e.a={props:{startTime:Number,endTime:Number,start:Boolean},data:function(){return{timeText:"00:00:00",saleStatus:1}},created:function(){this.start&&this.setCountDow(1e3*Number(this.startTime),1e3*Number(this.endTime))},methods:{checkTime:function(t){return t<10&&(t="0"+t),t},freshTime:function(t,e){var s=Number(t),i=(new Date).valueOf(),n=parseInt(s-i);if(n>0){var a=parseInt(n/864e5),o=parseInt(n/36e5%24),c=parseInt(n/6e4%60),r=parseInt(n/1e3%60);c=this.checkTime(c),r=this.checkTime(r);return a>0?a+"天"+o+"小时"+c+"分钟":o+"小时"+c+"分钟"+r+"秒"}if(n<=0){if(void 0===e)return!1;this.setCountDow(t,e)}},setCountDow:function(t,e){var s=this,i="",n=(new Date).valueOf(),a=this;if(console.log(n+" : "+e),n>=e&&0!==e)this.timeText="活动已结束1",this.saleStatus=3;else if(n>t&&n<e||0===t&&n<e){i="距结束：",this.saleStatus=2;var o=this.$options.methods.freshTime(e);!1===o||void 0===o?(this.timeText="活动已结束2",this.saleStatus=3):this.timeText=i+o;var c=void 0;c=setInterval(function(){var t=s.freshTime(e);!1===t||void 0===t?(a.timeText="活动已结束3",a.saleStatus=3,clearInterval(c)):a.timeText=i+t},1e3)}else if(n<=t){i="距开始：";var r=void 0;this.saleStatus=1,r=setInterval(function(){var n=s.freshTime(t,e);!1===n||void 0===n?clearInterval(r):a.timeText=i+n},1e3)}else n>t&&0===e&&0!==t&&(this.saleStatus=2,this.timeText="抢购中")}}}},wsM4:function(t,e,s){"use strict";var i=s("oQ93"),n=s("iSb8");var a=function(t){s("Witq")},o=s("WocH")(i.a,n.a,a,"data-v-0fe47c4c",null);e.a=o.exports}},["MhDc"]);