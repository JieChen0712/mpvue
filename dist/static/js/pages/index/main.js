global.webpackJsonp([2],{"5vTQ":function(t,e,n){"use strict";var s=n("wtEF"),o=n("VsUZ"),i=n("+mQk"),c=n("wsM4"),a=n("UCfo");e.a={data:function(){return{imgUrls:["../../../static/banner.png","http://img02.tooopen.com/images/20150928/tooopen_sy_143912755726.jpg","http://img06.tooopen.com/images/20160818/tooopen_sy_175866434296.jpg","http://img06.tooopen.com/images/20160818/tooopen_sy_175833047715.jpg"],indicatorDots:!0,interval:5e3,duration:1e3,swiperHeight:"200px",secPage:1,couponPage:1,secTemplet:[],couponTemplet:[],first_column_name:"限时秒杀",first_column_color:"",first_column_font:"",first_column_price:"秒杀价",second_column_name:"热门团购",second_column_color:"",second_column_font:"",second_column_price:"拼团价"}},components:{swiper:i.a,countdown:c.a,card:a.a},created:function(){var t=this;o.a.getIndexBanner().then(function(e){if(1===e.code){var n=e.info.replace(/,$/,"");t.imgUrls=n.split(",")}}).catch(function(t){wx.showToast({title:t,icon:"none",duration:2e3})}),o.a.getStore().then(function(e){if(1===e.code){var n=e.info;wx.setNavigationBarTitle({title:n.name}),wx.setTopBarText({text:n.name}),wx.setStorageSync("qrcode",n.qrcode),""!==n.first_column_name&&void 0!==n.first_column_name&&null!==n.first_column_name&&(t.first_column_name=n.first_column_name),""!==n.first_column_color&&void 0!==n.first_column_color&&null!==n.first_column_color&&(t.first_column_color=n.first_column_color),""!==n.first_column_font&&void 0!==n.first_column_font&&null!==n.first_column_font&&(t.first_column_font=n.first_column_font),""!==n.second_column_name&&void 0!==n.second_column_name&&null!==n.second_column_name&&(t.second_column_name=n.second_column_name),""!==n.second_column_color&&void 0!==n.second_column_color&&null!==n.second_column_color&&(t.second_column_color=n.second_column_color),""!==n.second_column_font&&void 0!==n.second_column_font&&null!==n.second_column_font&&(t.second_column_font=n.second_column_font),""!==n.first_column_price&&void 0!==n.first_column_price&&null!==n.first_column_price&&(t.first_column_price=n.first_column_price),""!==n.second_column_price&&void 0!==n.second_column_price&&null!==n.second_column_price&&(t.second_column_price=n.second_column_price)}else wx.showToast({title:e.msg,icon:"none",duration:2e3})}).catch(function(t){console.log(t)})},mounted:function(){this.getSecTemplets(1),this.getSecTemplets(2)},methods:{cantbuy:function(t,e){this.secTemplet[e].saleStatus=t},buyGoods:function(t,e){if(2!==t)return!1;console.log("buy"),wx.navigateTo({url:"/pages/detail/main?id="+e})},getSecTemplets:function(t){var e=this,n=void 0;1===t?n=this.secPage:2===t&&(n=this.couponPage),o.a.getTemplet(t,n,1).then(function(n){1===n.code&&null!==n.info.list?1===t?(e.secPage++,e.secTemplet=e.secTemplet.concat(n.info.list)):2===t&&(e.couponPage++,e.couponTemplet=e.couponTemplet.concat(n.info.list)):null===n.info.list?wx.showToast({title:"暂无更多商品",icon:"none",duration:2e3}):wx.showToast({title:n.msg,icon:"none",duration:2e3})}).catch(function(t){console.log(t)})},checkLogin:function(){var t=this;wx.checkSession({success:function(){wx.getStorageSync("openid")?wx.navigateTo({url:"/pages/coupon/main"}):t.$options.methods.Login()},fail:function(){t.$options.methods.Login()}})},Login:function(){wx.login({success:function(t){var e=t.code;wx.setStorageSync("resCode",e),wx.getUserInfo({success:function(t){o.a.checkLogin(e,t.userInfo.nickName,t.userInfo.avatarUrl,t.userInfo.gender,t.userInfo.province,t.userInfo.city,t.userInfo.country).then(function(t){if(1!==t.code)return wx.showToast({title:"登录失败",icon:"none",duration:2e3}),!1;wx.setStorageSync("openid",t.info.openid),wx.showToast({title:"登录成功",icon:"success",duration:2e3,complete:function(){wx.navigateTo({url:"/pages/coupon/main"})}})}).catch(function(t){console.log(t)})},fail:function(){}})},fail:function(){}})},changePercent:function(t,e){t=Number(t);var n=100*(1-(e=Number(e))/(t+e));return isNaN(n)?0:n},lower:function(t){this.getSecTemplets(1)}},filters:{isZero:function(t){return Number(t)>0}},computed:{isMiddle:function(){return this.secTemplet.length>1?"":"active"}},onPullDownRefresh:function(){wx.showToast({title:"下拉",icon:"none",duration:600}),setTimeout(function(){wx.stopPullDownRefresh()},1e3)},onReachBottom:function(){this.getSecTemplets(2)},onShareAppMessage:function(t){},store:s.a}},IR5c:function(t,e){},"IYk/":function(t,e,n){"use strict";var s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mall"},[n("div",{staticClass:"swiper-wrapper"},[n("swiper",{attrs:{imgUrls:t.imgUrls,indicatorDots:t.indicatorDots,interval:t.interval,duration:t.duration,swiperHeight:t.swiperHeight}})],1),t._v(" "),n("div",{staticClass:"entry"},[n("ul",{staticClass:"entry-list"},[n("li",{staticClass:"list-item"},[n("a",{attrs:{href:"/pages/product/main","open-type":"switchTab"}},[n("img",{attrs:{src:"../../../static/product_icon.png",alt:""}}),t._v(" "),n("p",[t._v("产品展示")])],1)]),t._v(" "),n("li",{staticClass:"list-item"},[n("a",{attrs:{href:"/pages/sale/main","open-type":"switchTab"}},[n("img",{attrs:{src:"../../../static/sale_icon.png",alt:""}}),t._v(" "),n("p",[t._v("促销")])],1)]),t._v(" "),n("li",{staticClass:"list-item"},[n("a",{attrs:{eventid:"0"},on:{click:t.checkLogin}},[n("img",{attrs:{src:"../../../static/coupon_icon.png",alt:""}}),t._v(" "),n("p",[t._v("优惠券")])],1)])],1)],1),t._v(" "),n("div",{staticClass:"seckill"},[n("p",{staticClass:"title",staticStyle:{color:"{{second_column_color}}","font-family":"{{first_column_font}}"}},[t._v("-"+t._s(t.first_column_name)+"-")]),t._v(" "),n("scroll-view",{staticClass:"product-list",class:t.isMiddle,staticStyle:{},attrs:{"scroll-x":"true",eventid:"4"},on:{scrolltolower:t.lower}},t._l(t.secTemplet,function(e,s){return n("view",{key:s,staticClass:"product-item",attrs:{eventid:"3-"+s},on:{click:function(n){t.buyGoods(e.saleStatus,e.id)}}},[n("div",{staticClass:"product-img"},[n("img",{attrs:{mode:"widthFix",src:"https://mall.wsxitong.cn"+e.image}}),t._v(" "),n("span",{staticClass:"sec-title"},[t._v("剩余："+t._s(e.quantity)+"件")]),t._v(" "),n("div",{staticClass:"mask",class:{active:1===e.saleStatus||3===e.saleStatus}},[n("p",[t._v("活动结束")])],1)]),t._v(" "),n("div",{staticClass:"product-detail"},[n("p",{staticClass:"name",attrs:{eventid:"1-"+s},on:{click:t.showTarget}},[n("span",{staticClass:"hot"},[t._v("HOT")]),t._v(t._s(e.name)+t._s(Number(e.quantity)))]),t._v(" "),n("card",{attrs:{start:!0,startTime:e.buy_limit_start_time,endTime:e.buy_limit_end_time,index:s,eventid:"2-"+s,mpcomid:"0-"+s},on:{over:t.cantbuy}}),t._v(" "),n("progress",{staticClass:"progress",attrs:{percent:e.quantity,active:"",activeColor:"#fe0100",backgroundColor:"transparent"}}),t._v(" "),n("p",{staticClass:"price"},[t._v(t._s(t.first_column_price)+"："),n("span",{staticClass:"red"},[t._v("￥"+t._s(e.price))]),n("span",{staticClass:"del"},[t._v("￥"+t._s(e.original_price))])])],1)])}))],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.couponTemplet.length>0,expression:"couponTemplet.length > 0"}],staticClass:"team-buy"},[n("p",{staticClass:"title",staticStyle:{color:"{{second_column_color}}","font-family":"{{second_column_font}}"}},[t._v("-"+t._s(t.second_column_name)+"-")]),t._v(" "),t._l(t.couponTemplet,function(e,s){return n("div",{key:s,staticClass:"team-product",attrs:{eventid:"5-"+s},on:{click:function(n){t.buyGoods(2,e.id)}}},[n("img",{attrs:{mode:"widthFix",src:"https://mall.wsxitong.cn"+e.image}}),t._v(" "),n("div",{staticClass:"text-left"},[n("p",{staticClass:"title2"},[t._v(t._s(e.name))]),t._v(" "),n("p",{staticClass:"price"},[n("span",{staticClass:"hot"},[t._v(t._s(t.second_column_price))]),t._v("￥"+t._s(e.price))]),t._v(" "),n("p",{staticClass:"red"},[t._v("立即拼团")])],1),t._v(" "),n("div",{staticClass:"text-right"},[n("p",[t._v(t._s(e.sales)),n("span",{staticClass:"desc"},[t._v("件已售")])])],1),t._v(" "),n("p",{staticClass:"more"},[t._v("查看更多>")])],1)})],2)])},staticRenderFns:[]};e.a=s},MhDc:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("5nAL"),o=n.n(s),i=n("Qt9A");new o.a(i.a).$mount()},Qt9A:function(t,e,n){"use strict";var s=n("5vTQ"),o=n("IYk/");var i=function(t){n("IR5c")},c=n("ybqe")(s.a,o.a,i,"data-v-0ab7f366",null);e.a=c.exports},eqiX:function(t,e,n){"use strict";e.a={props:{startTime:Number,endTime:Number,start:Boolean},data:function(){return{timeText:"00:00:00",saleStatus:1}},created:function(){this.start&&this.setCountDow(1e3*Number(this.startTime),1e3*Number(this.endTime))},methods:{checkTime:function(t){return t<10&&(t="0"+t),t},freshTime:function(t,e){var n=Number(t),s=(new Date).valueOf(),o=parseInt(n-s);if(o>0){var i=parseInt(o/864e5),c=parseInt(o/36e5%24),a=parseInt(o/6e4%60),r=parseInt(o/1e3%60);a=this.checkTime(a),r=this.checkTime(r);return i>0?i+"天"+c+"小时"+a+"分钟":c+"小时"+a+"分钟"+r+"秒"}if(o<=0){if(void 0===e)return!1;this.setCountDow(t,e)}},setCountDow:function(t,e){var n=this,s="",o=(new Date).valueOf(),i=this;if(console.log(o+" : "+e),o>=e&&0!==e)this.timeText="活动已结束1",this.saleStatus=3;else if(o>t&&o<e||0===t&&o<e){s="距结束：",this.saleStatus=2;var c=this.$options.methods.freshTime(e);!1===c||void 0===c?(this.timeText="活动已结束2",this.saleStatus=3):this.timeText=s+c;var a=void 0;a=setInterval(function(){var t=n.freshTime(e);!1===t||void 0===t?(i.timeText="活动已结束3",i.saleStatus=3,clearInterval(a)):i.timeText=s+t},1e3)}else if(o<=t){s="距开始：";var r=void 0;this.saleStatus=1,r=setInterval(function(){var o=n.freshTime(t,e);!1===o||void 0===o?clearInterval(r):i.timeText=s+o},1e3)}else o>t&&0===e&&0!==t&&(this.saleStatus=2,this.timeText="抢购中")}}}},jXms:function(t,e){},wdrb:function(t,e,n){"use strict";var s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"countdown"},[e("p",[this._v(this._s(this.timeText))])],1)},staticRenderFns:[]};e.a=s},wsM4:function(t,e,n){"use strict";var s=n("eqiX"),o=n("wdrb");var i=function(t){n("jXms")},c=n("ybqe")(s.a,o.a,i,"data-v-0fe47c4c",null);e.a=c.exports}},["MhDc"]);